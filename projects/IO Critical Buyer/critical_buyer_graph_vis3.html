<html>
  <head>
    <style>
      body {
        font-family: "Helvetica", sans-serif;
        padding-left: 20px;
        padding-top: 20px;
      }
    </style>
    <title>IO Table Visualisation</title>
    <script src="https://vega.github.io/vega-editor/vendor/d3.min.js"></script>
    <script src="https://vega.github.io/vega-editor/vendor/d3.geo.projection.min.js"></script>
    <script src="https://vega.github.io/vega-editor/vendor/topojson.js"></script>
    <script src="https://vega.github.io/vega-editor/vendor/d3.layout.cloud.js"></script>
    <script src="http://vega.github.io/vega-editor/vendor/vega.js" charset="utf-8"></script>
    <script src="http://vega.github.io/vega-editor/vendor/vega-embed.js" charset="utf-8"></script>
  </head>
  <body>
    <h1>Input-Output Table Visualisation: Critical Buyers</h1>

    <p>Each node in the visualisations below represents one of the 127 sectors of the Singapore economy.</p>
    <ul>
      <li>The size of the node represents its total output (includes exports and final domestic demand).</li>
      <li>The colour of the node represents the cluster it belongs to.</li>
    </ul>

    <p>The links depict "critical buyer" relationships: a link is drawn from A to B (follow the arcs in a clockwise manner) if B is a critical buyer of A.</p>
    <ul>
      <li>The thicker the link (from A to B), the larger the percentage of A's output purchased by B.</li>
    </ul>

    <p>This visualisation is mildly interactive. You can:</p>
    <ul>
      <li>Hover over a node to see its description,</li>
      <li>Double-click a node to see its total demand and linkages. Orange links go to sectors which the node is a critical buyer of, while blue links go to sectors which are critical buyers of the node.</li>
      <li>Hover over a link to see the buyer and supplier in the relationship, as well as the percentage of the supplier's output going to the buyer.</li>
    </ul>

    <p>Due to software limitations, I was not able to draw links from a sector to itself.</p>

    <h2>Notes for this version</h2>
    <p>Links only appear when a node is double-clicked, or if sector is chosen in dropdown menu. A link from A to B is only drawn if B buys more than a threshold percentage of A's output (inital threshold is set at 10%). Exports and Domestic Demand are included as nodes.</p>
    <p></p>
    <div id="vis"></div>


  </body>

  <script>
  vg.embed('#vis', "vega_graph_critical_buyer v10.json", function(error, result) {
    // Callback receiving the View instance and parsed Vega spec
    // result.view is the View, which resides under the '#vis' element
    // result.spec is the parsed spec
  });
  </script>

</html>
